# Go μ»¤λ²„λ¦¬μ§€ μ μ™Έ λ°©λ²• κ°€μ΄λ“

## β Goμ μ ν•μ‚¬ν•­

**Goλ” κ³µμ‹μ μΌλ΅ νΉμ • νμΌμ΄λ‚ ν•¨μλ¥Ό μ»¤λ²„λ¦¬μ§€μ—μ„ μ μ™Έν•λ” κΈ°λ¥μ„ μ κ³µν•μ§€ μ•μµλ‹λ‹¤.**

λ‹¤λ¥Έ μ–Έμ–΄μ™€μ λΉ„κµ:
- **Java (JaCoCo)**: `@Generated` μ–΄λ…Έν…μ΄μ…, μ μ™Έ ν¨ν„΄ μ„¤μ • κ°€λ¥
- **Python (coverage.py)**: `.coveragerc` νμΌλ΅ μ μ™Έ ν¨ν„΄ μ„¤μ •
- **JavaScript (Istanbul)**: `/* istanbul ignore */` μ£Όμ„
- **Go**: β κ³µμ‹ μ§€μ› μ—†μ

## β… κ°€λ¥ν• μ°ν λ°©λ²•λ“¤

### 1. λΉλ“ νƒκ·Έ μ‚¬μ© (Build Tags)

**μ¥μ **: νΉμ • νμΌμ„ λΉλ“μ—μ„ μ™„μ „ν μ μ™Έ
**λ‹¨μ **: ν”„λ΅λ•μ… μ½”λ“ κµ¬μ΅° λ³€κ²½ ν•„μ”

```go
// +build !test

package controller

// μ΄ νμΌμ€ ν…μ¤νΈ μ‹ λΉλ“λμ§€ μ•μ
```

**λ¬Έμ μ **: 
- ν”„λ΅λ•μ… λΉλ“μ™€ ν…μ¤νΈ λΉλ“κ°€ λ‹¬λΌμ§
- μ‹¤μ  μ‚¬μ© μ‹ κ¶μ¥λμ§€ μ•μ

### 2. λ³„λ„ ν¨ν‚¤μ§€ λ¶„λ¦¬

**μ¥μ **: κΉ”λ”ν• κµ¬μ΅°
**λ‹¨μ **: λ€κ·λ¨ λ¦¬ν©ν† λ§ ν•„μ”

```
internal/
  controller/
    service_controller.go      # λΉ„μ¦λ‹μ¤ λ΅μ§
  navercloud/
    client.go                   # API λνΌ (μ»¤λ²„λ¦¬μ§€ μ μ™Έ λ€μƒ)
```

ν…μ¤νΈ μ‹:
```bash
go test ./internal/controller/... -coverprofile=cover.out
# navercloud ν¨ν‚¤μ§€λ” μλ™μΌλ΅ μ μ™Έλ¨
```

### 3. μ»¤λ²„λ¦¬μ§€ ν›„μ²λ¦¬ μ¤ν¬λ¦½νΈ

**μ¥μ **: μ½”λ“ λ³€κ²½ λ¶ν•„μ”
**λ‹¨μ **: μ •ν™•ν• μ»¤λ²„λ¦¬μ§€κ°€ μ•„λ‹ (λ³΄κ³ μ©)

```bash
#!/bin/bash
# νΉμ • νμΌ μ μ™Έν•κ³  μ»¤λ²„λ¦¬μ§€ μ¬κ³„μ‚°
go test ./... -coverprofile=cover.out
grep -v "interfaces.go" cover.out > cover_filtered.out
go tool cover -func=cover_filtered.out
```

### 4. μ»¤λ²„λ¦¬μ§€ λ„κµ¬ μ‚¬μ©

**gocov-xml + Cobertura**:
```bash
go get github.com/axw/gocov/gocov
go get github.com/AlekSi/gocov-xml

go test -coverprofile=cover.out ./...
gocov convert cover.out | gocov-xml > coverage.xml
```

κ·Έ ν›„ CI/CDμ—μ„ νΉμ • νμΌ μ μ™Έ μ„¤μ •

### 5. μ£Όμ„ κΈ°λ° μ μ™Έ (λΉ„κ³µμ‹)

μΌλ¶€ λ„κµ¬λ“¤μ΄ μ§€μ›:
```go
// NOCOVER
func apiWrapper() {
    // ...
}
```

**μ§€μ› λ„κµ¬**:
- `gocov`
- `go-cover`
- ν•μ§€λ§ ν‘μ¤€ `go test -cover`λ” μ§€μ› μ• ν•¨

## π“ ν„μ¬ ν”„λ΅μ νΈ μ μ© κ°€λ¥ν• λ°©λ²•

### λ°©λ²• A: ν„μ‹¤μ μΈ μ»¤λ²„λ¦¬μ§€ λ©ν‘ μ¬μ„¤μ •

**κ¶μ¥**: API λνΌλ¥Ό μ μ™Έν• μ‹¤μ  λΉ„μ¦λ‹μ¤ λ΅μ§ μ»¤λ²„λ¦¬μ§€ μΈ΅μ •

```bash
# interfaces.go μ μ™Έν•κ³  μ»¤λ²„λ¦¬μ§€ κ³„μ‚°
./coverage-report.sh
```

**ν„μ¬ μƒνƒ**:
- μ „μ²΄ μ»¤λ²„λ¦¬μ§€: 8.0%
- ν…μ¤νΈ κ°€λ¥ν• ν•¨μ μ»¤λ²„λ¦¬μ§€:
  - `generateValidName`: 96.2%
  - `containsString`: 100%
  - `removeString`: 100%
  - `Reconcile`: 25.3%
  - `deleteNaverCloudLB`: 13.6%

### λ°©λ²• B: ν¨ν‚¤μ§€ λ¶„λ¦¬ (λ€κ·λ¨ λ¦¬ν©ν† λ§)

```
internal/
  controller/
    service_controller.go       # λΉ„μ¦λ‹μ¤ λ΅μ§λ§
    service_controller_test.go
  navercloud/
    client.go                    # API λνΌ
    mock_client.go              # ν…μ¤νΈμ© λ¨ν‚Ή
```

**μ¥μ **:
- κΉ”λ”ν• κµ¬μ΅°
- ν…μ¤νΈ μ©μ΄
- μ»¤λ²„λ¦¬μ§€ μ •ν™•

**λ‹¨μ **:
- 500+ μ¤„ μ½”λ“ μμ •
- ν”„λ΅λ•μ… λ¦¬μ¤ν¬

### λ°©λ²• C: μ»¤λ²„λ¦¬μ§€ λ¦¬ν¬νΈ ν•„ν„°λ§

ν„μ¬ κµ¬ν„λ `coverage-report.sh` μ‚¬μ©:

```bash
#!/bin/bash
go test ./internal/controller/... -coverprofile=cover.out

echo "=== ν…μ¤νΈ κ°€λ¥ν• μ½”λ“ μ»¤λ²„λ¦¬μ§€ ==="
go tool cover -func=cover.out | grep -v "interfaces.go" | grep -v "0.0%"
```

## π― κ¶μ¥ μ‚¬ν•­

### λ‹¨κΈ° (ν„μ¬ ν”„λ΅μ νΈ)
1. **ν„μ‹¤μ μΈ λ©ν‘ μ„¤μ •**: API λνΌ μ μ™Έν• μ»¤λ²„λ¦¬μ§€ μΈ΅μ •
2. **ν•„ν„°λ§ μ¤ν¬λ¦½νΈ μ‚¬μ©**: `coverage-report.sh`
3. **λ¬Έμ„ν™”**: μ–΄λ–¤ μ½”λ“κ°€ μ μ™Έλμ—λ”μ§€ λ…μ‹

### μ¥κΈ° (μ°¨κΈ° λ²„μ „)
1. **ν¨ν‚¤μ§€ λ¶„λ¦¬**: API ν΄λΌμ΄μ–ΈνΈλ¥Ό λ³„λ„ ν¨ν‚¤μ§€λ΅
2. **μμ΅΄μ„± μ£Όμ…**: λ¨λ“  API νΈμ¶μ„ μΈν„°νμ΄μ¤ ν†µν•΄μ„
3. **ν†µν•© ν…μ¤νΈ**: μ‹¤μ  API νΈμ¶ ν…μ¤νΈλ” λ³„λ„ ν™κ²½μ—μ„

## π“ κ²°λ΅ 

**Goμ—μ„λ” νΉμ • μ½”λ“λ¥Ό μ»¤λ²„λ¦¬μ§€μ—μ„ μ μ™Έν•λ” κ³µμ‹ λ°©λ²•μ΄ μ—†μµλ‹λ‹¤.**

λ€μ‹ :
1. μ½”λ“ κµ¬μ΅° κ°μ„  (ν¨ν‚¤μ§€ λ¶„λ¦¬)
2. μ»¤λ²„λ¦¬μ§€ λ¦¬ν¬νΈ ν›„μ²λ¦¬
3. ν„μ‹¤μ μΈ λ©ν‘ μ„¤μ •

μ΄ μ¤‘ **ν„μ¬ ν”„λ΅μ νΈμ—λ” 3λ²μ΄ κ°€μ¥ μ ν•©**ν•©λ‹λ‹¤.
